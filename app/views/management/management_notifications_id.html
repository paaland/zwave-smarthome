<!-- Admin notificarion view -->
<div ng-controller="ManagementNotificationIdController">
    <bb-loader></bb-loader>
    <h2>{{_t('Notification')}}<span ng-show="managementNotification.input.id > 0">: (#{{managementNotification.input.id}})</span>
        {{managementNotification.input.name}}</h2>
    <form name="form_notification" id="form_notification" class="form form-page"
          ng-submit="storeNotification(form_notification)" novalidate>
       <!-- <pre>{{managementNotification.input|json}}</pre>-->
        <fieldset>
            <div class="form-group form-inline">
                <!-- name -->
                <label class="isrequired display-block">{{_t('lb_name')}}: </label>
                <input name="name" id="name" type="text" class="form-control" value="{{input.name}}"
                       ng-model="managementNotification.input.name" ng-blur="nameBlur = true" ng-required="true"/>
                <bb-validator input-name='form_notification.name.$error.required' trans='_t("field_required")'
                              has-blur='nameBlur'></bb-validator>
            </div>
        </fieldset>
        <fieldset>

            <h3>{{_t('Allow notifications to emails')}}</h3>
            <div class="device-available-block assigned">
                <a href="" class="btn btn-default btn-tag"
                   ng-repeat="v in managementNotification.input.email"
                   ng-if_="input.rooms.indexOf(d.id) > -1"
                   ng-click="removeEmail($index)">{{v|cutText:true:20}} <i class="fa fa-times text-danger"></i></a>
            </div>
            <h3>{{_t('Available emails')}}</h3>

            <div class="device-available-block">
                <div class="btn-tag btn-group"
                     ng-repeat="v in managementNotification.emails"
                     ng-hide="managementNotification.input.email.indexOf(v) > -1">
                <button type="button" class="btn btn-default" ng-click="assignImail(v)">
                    {{v|cutText:true:20}} <i class="fa fa-plus text-success"></i>
                </button>
                    <button  type="button" class="btn btn-default btn-addon" ng-click="deleteEmail($index,_t('lb_delete_confirm'))">
                        <i class="fa fa-minus-circle text-danger"></i>
                    </button>
                </div>

            </div>
            <div class="form-inline">
                <!-- create email -->
                <div class="input-group">
                    <input name="email_add" id="email_add" class="form-control" value="" placeholder="{{_t('Add new email')}}"
                           ng-model="managementNotification.input.email_add"/>
                    <span class="input-group-addon clickable" title="{{_t('add_new')}}" ng-click="createEmail()">
                       <i class="fa fa-plus text-success"></i>
                   </span>
                </div>
            </div>

        </fieldset>

        <fieldset>
            <h3>{{_t('Allow push notifications to')}}</h3>
            <div class="device-available-block assigned">
                <a href="" class="btn btn-default btn-tag"
                   ng-repeat="v in managementNotification.input.push"
                   ng-if_="input.rooms.indexOf(d.id) > -1"
                   ng-click="removePush($index)">{{v|cutText:true:20}} <i class="fa fa-times text-danger"></i></a>
            </div>
            <h3>{{_t('Available devices')}}</h3>
            <div class="device-available-block">
                <a href="" class="btn btn-default btn-tag"
                   ng-repeat="v in managementNotification.pushes"
                   ng-hide="managementNotification.input.push.indexOf(v) > -1"
                   ng-click="assignPush(v)">{{v|cutText:true:20}} <i class="fa fa-plus text-success"></i></a>
            </div>
        </fieldset>

        <fieldset class="submit-entry">
            <button type="button" class="btn btn-default" bb-go-back><i class="fa fa-reply"></i> <span class="btn-name">{{_t('lb_cancel')}}</span>
            </button>
            <button type="submit" class="btn btn-submit" ng-disabled="form_notification.$invalid"><i
                    class="fa fa-check"></i> <span class="btn-name">{{_t('lb_save')}}</span></button>
        </fieldset>
    </form>

</div> <!-- /ng-controller --> 